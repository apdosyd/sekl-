<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>تأجير العجل مع حساب الوقت المتبقي ووقت الانتهاء</title>
<style>
  body { font-family: Arial, sans-serif; direction: rtl; padding: 20px; background: #f0f0f0; }
  h1 { text-align: center; margin-bottom: 20px; }
  .container { background: white; padding: 20px; border-radius: 8px; max-width: 400px; margin: auto; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
  label { display: block; margin-top: 15px; }
  input[type="time"], input[type="number"], input[type="text"] { width: 100%; padding: 8px; margin-top: 5px; box-sizing: border-box; font-size: 16px; }
  button { margin-top: 20px; width: 100%; padding: 10px; background: #007bff; color: white; border: none; font-size: 18px; cursor: pointer; border-radius: 4px; }
  button:hover { background: #0056b3; }
  .result { margin-top: 25px; font-size: 18px; text-align: center; }
</style>
</head>
<body>

<h1>حساب وقت تأجير العجلة</h1>

<div class="container">
  <label>اسم المستأجر:</label>
  <input type="text" id="renterName" placeholder="ادخل اسم المستأجر" />

  <label>وقت بداية الإيجار (ساعة:دقيقة):</label>
  <input type="time" id="startTime" step="60" />

  <label>مدة الإيجار بالدقائق:</label>
  <input type="number" id="duration" min="1" placeholder="مثلاً 30" />

  <button onclick="calculateEndTime()">احسب وقت الانتهاء والوقت المتبقي</button>

  <div class="result" id="output"></div>
</div>

<script>
  function calculateEndTime() {
    const renterName = document.getElementById('renterName').value.trim();
    const startTimeInput = document.getElementById('startTime').value;
    const duration = parseInt(document.getElementById('duration').value);

    if (!renterName) {
      alert('من فضلك ادخل اسم المستأجر');
      return;
    }
    if (!startTimeInput) {
      alert('من فضلك ادخل وقت بداية الإيجار');
      return;
    }
    if (isNaN(duration) || duration <= 0) {
      alert('من فضلك ادخل مدة إيجار صحيحة بالدقائق');
      return;
    }

    // الوقت الحالي في جهاز المستخدم
    const now = new Date();

    // استخرج الساعات والدقائق من input الوقت (صيغة "HH:MM")
    const [startHours, startMinutes] = startTimeInput.split(':').map(Number);

    // نعمل تاريخ جديد لبداية الإيجار بناء على اليوم الحالي ووقت البداية اللي دخلته
    const startDate = new Date(now.getFullYear(), now.getMonth(), now.getDate(), startHours, startMinutes, 0);

    // نحسب وقت الانتهاء بإضافة مدة الإيجار بالدقائق
    const endDate = new Date(startDate.getTime() + duration * 60000);

    // نحسب الوقت المتبقي بين الان ووقت الانتهاء
    let diff = Math.floor((endDate.getTime() - now.getTime()) / 1000); // بالثواني

    // لو الوقت الحالي بعد وقت الانتهاء يبقى صفر أو انتهى
    if (diff < 0) diff = 0;

    const remainMinutes = Math.floor(diff / 60);
    const remainSeconds = diff % 60;

    // صيغة عرض وقت الانتهاء (ساعة:دقيقة صباحاً / مساءً)
    let endHours = endDate.getHours();
    const endMinutes = endDate.getMinutes().toString().padStart(2, '0');
    const ampm = endHours >= 12 ? 'م' : 'ص';
    endHours = endHours % 12;
    if (endHours === 0) endHours = 12;

    // عرض النتائج
    const outputDiv = document.getElementById('output');
    outputDiv.innerHTML = `
      المستأجر: <strong>${renterName}</strong><br/>
      وقت بداية الإيجار: <strong>${startHours.toString().padStart(2, '0')}:${startMinutes.toString().padStart(2, '0')}</strong><br/>
      مدة الإيجار: <strong>${duration} دقيقة</strong><br/>
      الوقت المتبقي: <strong>${remainMinutes} دقيقة و ${remainSeconds} ثانية</strong><br/>
      وقت انتهاء الإيجار: <strong>${endHours}:${endMinutes} ${ampm}</strong>
    `;
  }
</script>

</body>
</html>
